# Task 4 μ™„λ£ κΈ°λ΅: μ£Όμ‹ λ°μ΄ν„° κ΄€λ¦¬ μ‹μ¤ν…

## π“… μ™„λ£μΌ
2025λ…„ 7μ›” 21μΌ

## π― κµ¬ν„λ κΈ°λ¥

### 1. μ£Όμ‹ λ°μ΄ν„° DTO ν΄λμ¤
- **νμΌ**: `src/application/dtos/stock.dto.ts`
- **κµ¬ν„ λ‚΄μ©**:
  - `StockPriceDto`: μ£Όμ‹ κ°€κ²© λ°μ΄ν„° μ „μ†΅ κ°μ²΄
  - `StockInfoDto`: μ£Όμ‹ κΈ°λ³Έ μ •λ³΄ μ „μ†΅ κ°μ²΄
  - `StockPriceResponseDto`: API μ‘λ‹µμ© μ£Όμ‹ κ°€κ²© λ°μ΄ν„°
  - `StockHistoryResponseDto`: μ£Όμ‹ νμ¤ν† λ¦¬ λ°μ΄ν„°
  - `StockStatsDto`: μ£Όμ‹ ν†µκ³„ λ°μ΄ν„°
  - `StockPriceUpdateDto`: μ£Όμ‹ κ°€κ²© μ—…λ°μ΄νΈ μ”μ²­
  - `StockSearchDto`: μ£Όμ‹ κ²€μƒ‰ μ”μ²­
  - `StockAlertDto`: μ£Όμ‹ μ•λ¦Ό μ„¤μ •

### 2. μ™Έλ¶€ API μ„λΉ„μ¤ (Alpha Vantage)
- **νμΌ**: `src/infrastructure/external/alpha-vantage.service.ts`
- **κµ¬ν„ λ‚΄μ©**:
  - Alpha Vantage API μ—°λ™
  - μ‹¤μ‹κ°„ μ£Όμ‹ κ°€κ²© μ΅°ν
  - μ£Όμ‹ κΈ°λ³Έ μ •λ³΄ μ΅°ν
  - API ν‚¤ κ΄€λ¦¬ λ° μ—λ¬ μ²λ¦¬
  - λ°λ¨ λ¨λ“ μ§€μ› (API ν‚¤ μ—†μ„ λ•)

### 3. μ£Όμ‹ λ°μ΄ν„° μ„λΉ„μ¤
- **νμΌ**: `src/modules/stocks/stocks.service.ts`
- **κµ¬ν„ λ‚΄μ©**:
  - μ‹¤μ‹κ°„ μ£Όμ‹ κ°€κ²© μ—…λ°μ΄νΈ
  - μ£Όμ‹ μ •λ³΄ μ €μ¥ λ° κ΄€λ¦¬
  - μ£Όμ‹ κ²€μƒ‰ κΈ°λ¥
  - μ£Όμ‹ ν†µκ³„ κ³„μ‚°
  - λ°°μΉ μ—…λ°μ΄νΈ κΈ°λ¥
  - κ°€κ²© λ³€λ™λ¥  κ³„μ‚°

### 4. μ£Όμ‹ μ»¨νΈλ΅¤λ¬
- **νμΌ**: `src/modules/stocks/stocks.controller.ts`
- **κµ¬ν„ λ‚΄μ©**:
  - `GET /stocks/:symbol/price`: μ‹¤μ‹κ°„ κ°€κ²© μ΅°ν
  - `GET /stocks/:symbol`: μ£Όμ‹ μ •λ³΄ μ΅°ν
  - `GET /stocks`: λ¨λ“  μ£Όμ‹ λ©λ΅
  - `GET /stocks/:symbol/history`: μ£Όμ‹ νμ¤ν† λ¦¬
  - `GET /stocks/search`: μ£Όμ‹ κ²€μƒ‰
  - `GET /stocks/:symbol/stats`: μ£Όμ‹ ν†µκ³„
  - `POST /stocks/:symbol/update`: μλ™ κ°€κ²© μ—…λ°μ΄νΈ
  - `POST /stocks/batch-update`: λ°°μΉ μ—…λ°μ΄νΈ
  - `POST /stocks/:symbol/check-condition`: μ΅°κ±΄ ν™•μΈ
  - `GET /stocks/:symbol/change-percent`: λ³€λ™λ¥  μ΅°ν
  - `DELETE /stocks/:symbol`: μ£Όμ‹ μ‚­μ 

### 5. μ£Όμ‹ λ¨λ“
- **νμΌ**: `src/modules/stocks/stocks.module.ts`
- **κµ¬ν„ λ‚΄μ©**:
  - TypeORM μ—”ν‹°ν‹° λ“±λ΅
  - μ„λΉ„μ¤ λ° μ»¨νΈλ΅¤λ¬ λ“±λ΅
  - μ™Έλ¶€ API μ„λΉ„μ¤ λ“±λ΅

### 6. λ°μ΄ν„°λ² μ΄μ¤ μ—”ν‹°ν‹° μ—…λ°μ΄νΈ
- **νμΌ**: `src/domain/entities/stock.entity.ts`
- **μ—…λ°μ΄νΈ λ‚΄μ©**:
  - μ£Όμ‹ κΈ°λ³Έ μ •λ³΄ ν•„λ“ μ¶”κ°€ (name, sector, industry, exchange, currency)
  - κ°€κ²© κ΄€λ ¨ ν•„λ“ μ¶”κ°€ (high, low, open, close)
  - μ¬λ¬΄ μ •λ³΄ ν•„λ“ μ¶”κ°€ (peRatio, dividendYield)
  - νƒ€μ„μ¤νƒ¬ν”„ ν•„λ“ μ¶”κ°€ (lastUpdated)

## π”§ κΈ°μ μ  κµ¬ν„ μ‚¬ν•­

### 1. ν΄λ¦° μ•„ν‚¤ν…μ² μ¤€μ
- **Domain Layer**: Stock μ—”ν‹°ν‹°
- **Application Layer**: DTO ν΄λμ¤λ“¤
- **Infrastructure Layer**: Alpha Vantage API μ„λΉ„μ¤
- **Module Layer**: Stocks λ¨λ“, μ„λΉ„μ¤, μ»¨νΈλ΅¤λ¬

### 2. μ—λ¬ μ²λ¦¬
- API ν‚¤κ°€ μ—†μ„ λ• λ°λ¨ λ¨λ“λ΅ λ™μ‘
- μ™Έλ¶€ API νΈμ¶ μ‹¤ν¨ μ‹ μ μ ν• μ—λ¬ λ©”μ‹μ§€
- λ°μ΄ν„°λ² μ΄μ¤ μ΅°ν μ‹¤ν¨ μ‹ NotFoundException

### 3. κ²€μ¦ λ° λ³΄μ•
- DTO ν΄λμ¤μ— class-validator λ°μ½”λ μ΄ν„° μ μ©
- μ…λ ¥ λ°μ΄ν„° κ²€μ¦
- API μ‘λ‹µ κµ¬μ΅°ν™”

### 4. μ„±λ¥ μµμ ν™”
- λ°°μΉ μ—…λ°μ΄νΈ κΈ°λ¥
- λ°μ΄ν„°λ² μ΄μ¤ μΈλ±μ‹± κ³ λ ¤
- μΊμ‹± μ „λµ μ¤€λΉ„

## π§ ν…μ¤νΈ κ²°κ³Ό

### 1. μ„λ²„ μ‹μ‘ ν…μ¤νΈ
```bash
npm run start:dev
# β… μ„±κ³µ: μ„λ²„κ°€ μ •μƒμ μΌλ΅ μ‹μ‘λ¨
```

### 2. API μ—”λ“ν¬μΈνΈ ν…μ¤νΈ
```bash
# μ£Όμ‹ λ©λ΅ μ΅°ν
curl -s "http://localhost:9988/stocks"
# β… μ„±κ³µ: λ°μ΄ν„°λ² μ΄μ¤μ ν…μ¬λΌ μ£Όμ‹ μ •λ³΄ λ°ν™

# μ£Όμ‹ κ²€μƒ‰
curl -s "http://localhost:9988/stocks/search?query=tesla"
# β… μ„±κ³µ: ν…μ¬λΌ κ΄€λ ¨ μ£Όμ‹ κ²€μƒ‰ κ²°κ³Ό λ°ν™

# μ‹¤μ‹κ°„ κ°€κ²© μ΅°ν (λ°λ¨ λ¨λ“)
curl -s "http://localhost:9988/stocks/tesla/price"
# β… μ„±κ³µ: API ν‚¤ μ—†μμΌλ΅ μΈν• λ°λ¨ λ¨λ“ μ‘λ‹µ
```

### 3. λ°μ΄ν„°λ² μ΄μ¤ μ—°λ™ ν…μ¤νΈ
- β… PostgreSQL μ—°κ²° μ„±κ³µ
- β… Stock ν…μ΄λΈ” μ¤ν‚¤λ§ μ •μƒ
- β… κΈ°μ΅΄ ν…μ¬λΌ λ°μ΄ν„° μ΅°ν μ„±κ³µ

## π“ κµ¬ν„λ API μ—”λ“ν¬μΈνΈ

| λ©”μ„λ“ | μ—”λ“ν¬μΈνΈ | μ„¤λ… | μΈμ¦ ν•„μ” |
|--------|------------|------|-----------|
| GET | `/stocks/:symbol/price` | μ‹¤μ‹κ°„ κ°€κ²© μ΅°ν | β |
| GET | `/stocks/:symbol` | μ£Όμ‹ μ •λ³΄ μ΅°ν | β |
| GET | `/stocks` | λ¨λ“  μ£Όμ‹ λ©λ΅ | β |
| GET | `/stocks/:symbol/history` | μ£Όμ‹ νμ¤ν† λ¦¬ | β |
| GET | `/stocks/search` | μ£Όμ‹ κ²€μƒ‰ | β |
| GET | `/stocks/:symbol/stats` | μ£Όμ‹ ν†µκ³„ | β |
| POST | `/stocks/:symbol/update` | μλ™ κ°€κ²© μ—…λ°μ΄νΈ | β |
| POST | `/stocks/batch-update` | λ°°μΉ μ—…λ°μ΄νΈ | β |
| POST | `/stocks/:symbol/check-condition` | μ΅°κ±΄ ν™•μΈ | β |
| GET | `/stocks/:symbol/change-percent` | λ³€λ™λ¥  μ΅°ν | β |
| DELETE | `/stocks/:symbol` | μ£Όμ‹ μ‚­μ  | β |

## π”„ λ‹¤μ λ‹¨κ³„ μ¤€λΉ„μ‚¬ν•­

### 1. API ν‚¤ μ„¤μ •
- Alpha Vantage API ν‚¤ λ°κΈ‰ ν•„μ”
- ν™κ²½ λ³€μ μ„¤μ •: `ALPHA_VANTAGE_API_KEY`

### 2. μ¤μΌ€μ¤„λ§ κΈ°λ¥
- Node.js v18 νΈν™μ„± λ¬Έμ λ΅ μ„μ‹ μ κ±°
- μ¶”ν›„ cron μ‘μ—… μ¬κµ¬ν„ ν•„μ”

### 3. μ‹¤μ‹κ°„ λ°μ΄ν„° μμ§‘
- WebSocket μ—°λ™ κ³ λ ¤
- μ‹¤μ‹κ°„ κ°€κ²© μ—…λ°μ΄νΈ μµμ ν™”

## π“ μ„±κ³Ό μ§€ν‘

- β… **λ¨λ“ν™”λ κµ¬μ΅°**: ν΄λ¦° μ•„ν‚¤ν…μ² μ›μΉ™ μ¤€μ
- β… **ν™•μ¥ κ°€λ¥ν• μ„¤κ³„**: λ‹¤λ¥Έ μ£Όμ‹ API μ¶”κ°€ μ©μ΄
- β… **μ—λ¬ μ²λ¦¬**: κ²¬κ³ ν• μμ™Έ μ²λ¦¬ κµ¬ν„
- β… **API λ¬Έμ„ν™”**: λ…ν™•ν• μ—”λ“ν¬μΈνΈ κµ¬μ΅°
- β… **ν…μ¤νΈ κ°€λ¥**: λ‹¨μ„ ν…μ¤νΈ μ‘μ„± κ°€λ¥ν• κµ¬μ΅°

## π‰ κ²°λ΅ 

Task 4 μ£Όμ‹ λ°μ΄ν„° κ΄€λ¦¬ μ‹μ¤ν…μ΄ μ„±κ³µμ μΌλ΅ μ™„λ£λμ—μµλ‹λ‹¤. μ™Έλ¶€ API μ—°λ™, λ°μ΄ν„°λ² μ΄μ¤ κ΄€λ¦¬, RESTful API κµ¬ν„μ΄ λ¨λ‘ μ™„λ£λμ–΄ λ‹¤μ λ‹¨κ³„μΈ **Task 5: ν¬νΈν΄λ¦¬μ¤ κ΄€λ¦¬ μ‹μ¤ν…** κµ¬ν„μ„ μ§„ν–‰ν•  μ μμµλ‹λ‹¤.

---

**λ‹¤μ Task**: ν¬νΈν΄λ¦¬μ¤ κ΄€λ¦¬ μ‹μ¤ν… (μ‚¬μ©μλ³„ μ£Όμ‹ ν¬νΈν΄λ¦¬μ¤, λ³΄μ λ‰ κ΄€λ¦¬, μμµλ¥  κ³„μ‚°) 