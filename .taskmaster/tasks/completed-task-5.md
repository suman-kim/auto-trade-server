# Task 5 μ™„λ£ κΈ°λ΅: ν¬νΈν΄λ¦¬μ¤ κ΄€λ¦¬ μ‹μ¤ν…

## π“… μ™„λ£μΌ
2025λ…„ 7μ›” 21μΌ

## π― κµ¬ν„λ κΈ°λ¥

### 1. ν¬νΈν΄λ¦¬μ¤ λ°μ΄ν„° DTO ν΄λμ¤
- **νμΌ**: `src/application/dtos/portfolio.dto.ts`
- **κµ¬ν„ λ‚΄μ©**:
  - `CreatePortfolioDto`: ν¬νΈν΄λ¦¬μ¤ μƒμ„± μ”μ²­
  - `UpdatePortfolioDto`: ν¬νΈν΄λ¦¬μ¤ μ—…λ°μ΄νΈ μ”μ²­
  - `AddHoldingDto`: λ³΄μ λ‰ μ¶”κ°€ μ”μ²­
  - `UpdateHoldingDto`: λ³΄μ λ‰ μ—…λ°μ΄νΈ μ”μ²­
  - `PortfolioResponseDto`: ν¬νΈν΄λ¦¬μ¤ μ‘λ‹µ λ°μ΄ν„°
  - `PortfolioHoldingResponseDto`: λ³΄μ λ‰ μ‘λ‹µ λ°μ΄ν„°
  - `PortfolioSummaryDto`: ν¬νΈν΄λ¦¬μ¤ μ”μ•½ λ°μ΄ν„°
  - `PortfolioPerformanceDto`: ν¬νΈν΄λ¦¬μ¤ μ„±κ³Ό λ¶„μ„ λ°μ΄ν„°
  - `RebalancePortfolioDto`: ν¬νΈν΄λ¦¬μ¤ λ¦¬λ°Έλ°μ‹± μ”μ²­
  - `ExportPortfolioDto`: ν¬νΈν΄λ¦¬μ¤ λ‚΄λ³΄λ‚΄κΈ° μ”μ²­

### 2. ν¬νΈν΄λ¦¬μ¤ μ„λΉ„μ¤
- **νμΌ**: `src/modules/portfolios/portfolios.service.ts`
- **κµ¬ν„ λ‚΄μ©**:
  - μ‚¬μ©μλ³„ ν¬νΈν΄λ¦¬μ¤ λ©λ΅ μ΅°ν
  - ν¬νΈν΄λ¦¬μ¤ μƒμ„±, μμ •, μ‚­μ 
  - ν¬νΈν΄λ¦¬μ¤ λ³΄μ λ‰ μ¶”κ°€, μμ •, μ‚­μ 
  - ν¬νΈν΄λ¦¬μ¤ μ”μ•½ μ •λ³΄ κ³„μ‚°
  - ν¬νΈν΄λ¦¬μ¤ μ„±κ³Ό λ¶„μ„
  - μ‹¤μ‹κ°„ μμµλ¥  κ³„μ‚°
  - λ³΄μ λ‰ ν‰κ·  κ°€κ²© κ³„μ‚°

### 3. ν¬νΈν΄λ¦¬μ¤ μ»¨νΈλ΅¤λ¬
- **νμΌ**: `src/modules/portfolios/portfolios.controller.ts`
- **κµ¬ν„ λ‚΄μ©**:
  - `GET /portfolios`: μ‚¬μ©μ ν¬νΈν΄λ¦¬μ¤ λ©λ΅
  - `POST /portfolios`: ν¬νΈν΄λ¦¬μ¤ μƒμ„±
  - `GET /portfolios/:id`: ν¬νΈν΄λ¦¬μ¤ μƒμ„Έ μ •λ³΄
  - `PUT /portfolios/:id`: ν¬νΈν΄λ¦¬μ¤ μμ •
  - `DELETE /portfolios/:id`: ν¬νΈν΄λ¦¬μ¤ μ‚­μ 
  - `GET /portfolios/:id/holdings`: λ³΄μ λ‰ λ©λ΅
  - `POST /portfolios/:id/holdings`: λ³΄μ λ‰ μ¶”κ°€
  - `PUT /portfolios/:id/holdings/:holdingId`: λ³΄μ λ‰ μμ •
  - `DELETE /portfolios/:id/holdings/:holdingId`: λ³΄μ λ‰ μ‚­μ 
  - `GET /portfolios/:id/performance`: μ„±κ³Ό λ¶„μ„

### 4. ν¬νΈν΄λ¦¬μ¤ λ¨λ“
- **νμΌ**: `src/modules/portfolios/portfolios.module.ts`
- **κµ¬ν„ λ‚΄μ©**:
  - TypeORM μ—”ν‹°ν‹° λ“±λ΅ (Portfolio, PortfolioHolding, Stock)
  - μ„λΉ„μ¤ λ° μ»¨νΈλ΅¤λ¬ λ“±λ΅
  - StocksModule μμ΅΄μ„± μ£Όμ…

### 5. λ°μ΄ν„°λ² μ΄μ¤ μ—”ν‹°ν‹° μ—…λ°μ΄νΈ
- **νμΌ**: `src/domain/entities/portfolio-holding.entity.ts`
- **μ—…λ°μ΄νΈ λ‚΄μ©**:
  - `purchaseDate` ν•„λ“ μ¶”κ°€ (κµ¬λ§¤μΌ)
  - `notes` ν•„λ“ μ¶”κ°€ (λ©”λ¨)

### 6. μ£Όμ‹ μ„λΉ„μ¤ ν™•μ¥
- **νμΌ**: `src/modules/stocks/stocks.service.ts`
- **μ¶”κ°€ λ‚΄μ©**:
  - `getCurrentPrice()` λ©”μ„λ“ μ¶”κ°€
  - ν¬νΈν΄λ¦¬μ¤ κ³„μ‚°μ„ μ„ν• ν„μ¬ κ°€κ²© μ΅°ν κΈ°λ¥

## π”§ κΈ°μ μ  κµ¬ν„ μ‚¬ν•­

### 1. ν΄λ¦° μ•„ν‚¤ν…μ² μ¤€μ
- **Domain Layer**: Portfolio, PortfolioHolding μ—”ν‹°ν‹°
- **Application Layer**: DTO ν΄λμ¤λ“¤
- **Infrastructure Layer**: TypeORM Repository
- **Module Layer**: Portfolios λ¨λ“, μ„λΉ„μ¤, μ»¨νΈλ΅¤λ¬

### 2. μ‚¬μ©μ μΈμ¦ λ° κ¶ν• κ΄€λ¦¬
- JWT ν† ν° κΈ°λ° μΈμ¦
- μ‚¬μ©μλ³„ ν¬νΈν΄λ¦¬μ¤ μ ‘κ·Ό μ μ–΄
- `@CurrentUser()` λ°μ½”λ μ΄ν„°λ¥Ό ν†µν• μ‚¬μ©μ μ •λ³΄ μ¶”μ¶

### 3. λ°μ΄ν„° κ²€μ¦
- DTO ν΄λμ¤μ— class-validator λ°μ½”λ μ΄ν„° μ μ©
- μ…λ ¥ λ°μ΄ν„° νƒ€μ… λ° λ²”μ„ κ²€μ¦
- ν¬νΈν΄λ¦¬μ¤ μ‚­μ  μ‹ λ³΄μ λ‰ ν™•μΈ

### 4. μ‹¤μ‹κ°„ κ³„μ‚°
- ν„μ¬ μ£Όμ‹ κ°€κ²© κΈ°λ° μ‹μ¥ κ°€μΉ κ³„μ‚°
- μ‹¤ν„/λ―Έμ‹¤ν„ μ†μµ κ³„μ‚°
- μμµλ¥  κ³„μ‚° (λ°±λ¶„μ¨)

### 5. μ—λ¬ μ²λ¦¬
- ν¬νΈν΄λ¦¬μ¤/λ³΄μ λ‰ μ΅΄μ¬ μ—¬λ¶€ ν™•μΈ
- λ³΄μ λ‰μ΄ μλ” ν¬νΈν΄λ¦¬μ¤ μ‚­μ  λ°©μ§€
- μ£Όμ‹ μ •λ³΄ μ—†μ„ λ• μ μ ν• μ—λ¬ λ©”μ‹μ§€

## π§ ν…μ¤νΈ κ²°κ³Ό

### 1. μ„λ²„ μ‹μ‘ ν…μ¤νΈ
```bash
npm run start:dev
# β… μ„±κ³µ: μ„λ²„κ°€ μ •μƒμ μΌλ΅ μ‹μ‘λ¨
```

### 2. μ‚¬μ©μ μΈμ¦ ν…μ¤νΈ
```bash
# λ΅κ·ΈμΈν•μ—¬ JWT ν† ν° νλ“
curl -X POST http://localhost:9988/auth/login \
  -H "Content-Type: application/json" \
  -d '{"email":"test@example.com","password":"password123"}'
# β… μ„±κ³µ: JWT ν† ν° λ°κΈ‰
```

### 3. ν¬νΈν΄λ¦¬μ¤ API ν…μ¤νΈ
```bash
# ν¬νΈν΄λ¦¬μ¤ μƒμ„±
curl -X POST http://localhost:9988/portfolios \
  -H "Authorization: Bearer $TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"name":"ν…μ¬λΌ ν¬νΈν΄λ¦¬μ¤","description":"ν…μ¬λΌ μ£Όμ‹ ν¬μ ν¬νΈν΄λ¦¬μ¤","riskLevel":"moderate","targetReturn":15}'
# β… μ„±κ³µ: ν¬νΈν΄λ¦¬μ¤ μƒμ„±λ¨

# ν¬νΈν΄λ¦¬μ¤ λ©λ΅ μ΅°ν
curl -X GET http://localhost:9988/portfolios \
  -H "Authorization: Bearer $TOKEN"
# β… μ„±κ³µ: μƒμ„±λ ν¬νΈν΄λ¦¬μ¤ λ©λ΅ λ°ν™

# λ³΄μ λ‰ μ¶”κ°€
curl -X POST http://localhost:9988/portfolios/1/holdings \
  -H "Authorization: Bearer $TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"symbol":"TSLA","quantity":10,"averagePrice":250.0,"notes":"ν…μ¬λΌ μ£Όμ‹ 10μ£Ό κµ¬λ§¤"}'
# β… μ„±κ³µ: λ³΄μ λ‰ μ¶”κ°€λ¨

# λ³΄μ λ‰ λ©λ΅ μ΅°ν
curl -X GET http://localhost:9988/portfolios/1/holdings \
  -H "Authorization: Bearer $TOKEN"
# β… μ„±κ³µ: λ³΄μ λ‰ μ •λ³΄ λ°ν™ (μλ‰, ν‰κ· κ°€, μ‹μ¥κ°€μΉ, μ†μµ λ“±)

# ν¬νΈν΄λ¦¬μ¤ μ„±κ³Ό λ¶„μ„
curl -X GET http://localhost:9988/portfolios/1/performance \
  -H "Authorization: Bearer $TOKEN"
# β… μ„±κ³µ: μ„±κ³Ό λ¶„μ„ λ°μ΄ν„° λ°ν™
```

### 4. λ°μ΄ν„°λ² μ΄μ¤ μ—°λ™ ν…μ¤νΈ
- β… PostgreSQL μ—°κ²° μ„±κ³µ
- β… Portfolio, PortfolioHolding ν…μ΄λΈ” μ¤ν‚¤λ§ μ •μƒ
- β… μ‚¬μ©μλ³„ ν¬νΈν΄λ¦¬μ¤ λ°μ΄ν„° μ €μ¥/μ΅°ν μ„±κ³µ
- β… λ³΄μ λ‰ λ°μ΄ν„° μ €μ¥/μ΅°ν μ„±κ³µ

## π“ κµ¬ν„λ API μ—”λ“ν¬μΈνΈ

| λ©”μ„λ“ | μ—”λ“ν¬μΈνΈ | μ„¤λ… | μΈμ¦ ν•„μ” |
|--------|------------|------|-----------|
| GET | `/portfolios` | μ‚¬μ©μ ν¬νΈν΄λ¦¬μ¤ λ©λ΅ | β… |
| POST | `/portfolios` | ν¬νΈν΄λ¦¬μ¤ μƒμ„± | β… |
| GET | `/portfolios/:id` | ν¬νΈν΄λ¦¬μ¤ μƒμ„Έ μ •λ³΄ | β… |
| PUT | `/portfolios/:id` | ν¬νΈν΄λ¦¬μ¤ μμ • | β… |
| DELETE | `/portfolios/:id` | ν¬νΈν΄λ¦¬μ¤ μ‚­μ  | β… |
| GET | `/portfolios/:id/holdings` | λ³΄μ λ‰ λ©λ΅ | β… |
| POST | `/portfolios/:id/holdings` | λ³΄μ λ‰ μ¶”κ°€ | β… |
| PUT | `/portfolios/:id/holdings/:holdingId` | λ³΄μ λ‰ μμ • | β… |
| DELETE | `/portfolios/:id/holdings/:holdingId` | λ³΄μ λ‰ μ‚­μ  | β… |
| GET | `/portfolios/:id/performance` | μ„±κ³Ό λ¶„μ„ | β… |

## π’° ν¬νΈν΄λ¦¬μ¤ κΈ°λ¥ μƒμ„Έ

### 1. ν¬νΈν΄λ¦¬μ¤ κ΄€λ¦¬
- **λ‹¤μ¤‘ ν¬νΈν΄λ¦¬μ¤ μ§€μ›**: μ‚¬μ©μλ‹Ή μ—¬λ¬ ν¬νΈν΄λ¦¬μ¤ μƒμ„± κ°€λ¥
- **λ¦¬μ¤ν¬ λ λ²¨ μ„¤μ •**: conservative, moderate, aggressive
- **λ©ν‘ μμµλ¥  μ„¤μ •**: λ°±λ¶„μ¨ λ‹¨μ„λ΅ μ„¤μ • κ°€λ¥
- **ν¬νΈν΄λ¦¬μ¤ μ„¤λ…**: μμ  ν…μ¤νΈ λ©”λ¨

### 2. λ³΄μ λ‰ κ΄€λ¦¬
- **μ£Όμ‹ μ‹¬λ³Ό κΈ°λ° μ¶”κ°€**: TSLA, AAPL λ“±
- **μλ‰ λ° ν‰κ· κ°€ κ΄€λ¦¬**: μ—¬λ¬ λ² κµ¬λ§¤ μ‹ ν‰κ· κ°€ μλ™ κ³„μ‚°
- **κµ¬λ§¤μΌ κΈ°λ΅**: λ³΄μ λ‰λ³„ κµ¬λ§¤μΌ κ΄€λ¦¬
- **λ©”λ¨ κΈ°λ¥**: λ³΄μ λ‰λ³„ λ©”λ¨ μ‘μ„±

### 3. μ‹¤μ‹κ°„ κ³„μ‚°
- **μ‹μ¥ κ°€μΉ**: ν„μ¬ μ£Όμ‹ κ°€κ²© Γ— λ³΄μ  μλ‰
- **μ΄ ν¬μ λΉ„μ©**: ν‰κ·  κµ¬λ§¤κ°€ Γ— λ³΄μ  μλ‰
- **λ―Έμ‹¤ν„ μ†μµ**: μ‹μ¥ κ°€μΉ - μ΄ ν¬μ λΉ„μ©
- **μμµλ¥ **: (λ―Έμ‹¤ν„ μ†μµ / μ΄ ν¬μ λΉ„μ©) Γ— 100

### 4. μ„±κ³Ό λ¶„μ„
- **ν¬νΈν΄λ¦¬μ¤ μ”μ•½**: μ΄ κ°€μΉ, μ΄ λΉ„μ©, μ΄ μμµ, μμµλ¥ 
- **λ³΄μ λ‰λ³„ λ¶„μ„**: κ°λ³„ μ£Όμ‹μ μμµλ¥  λ° μ†μµ
- **μ„±κ³Ό μ§€ν‘**: Sharpe Ratio, μµλ€ λ‚™ν­, λ³€λ™μ„± (κΈ°λ³Έ κµ¬μ΅°)

## π”„ λ‹¤μ λ‹¨κ³„ μ¤€λΉ„μ‚¬ν•­

### 1. κ³ κΈ‰ μ„±κ³Ό λ¶„μ„
- νμ¤ν† λ¦¬ λ°μ΄ν„° κΈ°λ° μμµλ¥  κ³„μ‚°
- μ‹¤μ  Sharpe Ratio, μµλ€ λ‚™ν­ κ³„μ‚°
- μ°¨νΈ λ°μ΄ν„° μƒμ„±

### 2. ν¬νΈν΄λ¦¬μ¤ λ¦¬λ°Έλ°μ‹±
- λ©ν‘ λΉ„μ¤‘ μ„¤μ • λ° λ¦¬λ°Έλ°μ‹± μ μ•
- μλ™ λ¦¬λ°Έλ°μ‹± κΈ°λ¥

### 3. μ•λ¦Ό μ‹μ¤ν…
- μμµλ¥  κΈ°λ° μ•λ¦Ό
- ν¬νΈν΄λ¦¬μ¤ λ³€λ™ μ•λ¦Ό

## π“ μ„±κ³Ό μ§€ν‘

- β… **μ‚¬μ©μλ³„ ν¬νΈν΄λ¦¬μ¤**: μ™„μ „ν• κ²©λ¦¬ λ° κ΄€λ¦¬
- β… **μ‹¤μ‹κ°„ κ³„μ‚°**: ν„μ¬ κ°€κ²© κΈ°λ° μ •ν™•ν• μμµλ¥ 
- β… **λ³΄μ λ‰ κ΄€λ¦¬**: ν‰κ· κ°€ μλ™ κ³„μ‚° λ° λ©”λ¨ κΈ°λ¥
- β… **μ„±κ³Ό λ¶„μ„**: ν¬νΈν΄λ¦¬μ¤ λ° λ³΄μ λ‰λ³„ μƒμ„Έ λ¶„μ„
- β… **API μ™„μ„±λ„**: CRUD μ‘μ—… μ™„μ „ μ§€μ›
- β… **λ³΄μ•**: JWT κΈ°λ° μΈμ¦ λ° κ¶ν• κ΄€λ¦¬

## π‰ κ²°λ΅ 

Task 5 ν¬νΈν΄λ¦¬μ¤ κ΄€λ¦¬ μ‹μ¤ν…μ΄ μ„±κ³µμ μΌλ΅ μ™„λ£λμ—μµλ‹λ‹¤. μ‚¬μ©μλ³„ ν¬νΈν΄λ¦¬μ¤ κ΄€λ¦¬, λ³΄μ λ‰ κ΄€λ¦¬, μ‹¤μ‹κ°„ μμµλ¥  κ³„μ‚°, μ„±κ³Ό λ¶„μ„ κΈ°λ¥μ΄ λ¨λ‘ κµ¬ν„λμ–΄ λ‹¤μ λ‹¨κ³„μΈ **Task 6: κ±°λ μ „λµ μ‹μ¤ν…** κµ¬ν„μ„ μ§„ν–‰ν•  μ μμµλ‹λ‹¤.

---

**λ‹¤μ Task**: κ±°λ μ „λµ μ‹μ¤ν… (λ§¤λ§¤ μ΅°κ±΄ μ„¤μ •, μλ™ κ±°λ λ΅μ§, λ°±ν…μ¤ν…) 